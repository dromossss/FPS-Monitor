Parfait âœ…
On va remplacer les **tempÃ©ratures factices** (`random.randint`) par de **vraies lectures hardware**.

âš¡ Le problÃ¨me : ni `psutil` ni `GPUtil` ne donnent directement les tempÃ©ratures CPU/GPU.
ğŸ‘‰ La solution : utiliser **WMI** (Windows Management Instrumentation) et/ou **OpenHardwareMonitor**.

---

# ğŸ”¹ MÃ©thode 1 : WMI (facile mais limitÃ©)

### Installation

```bash
pip install wmi
```

### Exemple CPU

```python
import wmi

def get_cpu_temp_wmi():
    w = wmi.WMI(namespace="root\\wmi")
    temps = w.MSAcpi_ThermalZoneTemperature()
    if temps:
        # TempÃ©rature en dixiÃ¨mes de Kelvin â†’ conversion en Â°C
        return int(temps[0].CurrentTemperature / 10.0 - 273.15)
    return None
```

âš ï¸ Limite : souvent, Ã§a ne retourne rien sur les PC modernes â†’ dÃ©pend des drivers ACPI de ta carte mÃ¨re.

---

# ğŸ”¹ MÃ©thode 2 : OpenHardwareMonitor (plus fiable)

### Ã‰tapes

1. TÃ©lÃ©charge **OpenHardwareMonitor** (gratuit, open source) :
   ğŸ‘‰ [https://openhardwaremonitor.org/](https://openhardwaremonitor.org/)

2. Lance-le **en arriÃ¨re-plan** (il peut aussi tourner en mode "minimisÃ© dans la barre").

3. Active lâ€™option **"Run a web server"** dans `Options â†’ Remote Web Server`.

   * Par dÃ©faut, Ã§a lance un serveur local sur `http://localhost:8085/`
   * Les tempÃ©ratures, usages CPU/GPU y seront dispo en JSON/XML.

### Exemple Python (lecture via JSON)

```python
import requests

def get_cpu_gpu_from_ohm():
    try:
        url = "http://localhost:8085/data.json"
        r = requests.get(url)
        data = r.json()

        cpu_temp, gpu_temp, cpu_load, gpu_load = None, None, None, None

        def parse(node):
            nonlocal cpu_temp, gpu_temp, cpu_load, gpu_load
            if "Text" in node:
                name = node["Text"].lower()
                if "cpu total" in name:
                    cpu_load = float(node["Value"].replace("%", ""))
                if "cpu package" in name or "cpu" in name and "temp" in name:
                    cpu_temp = float(node["Value"].replace("Â°C", ""))
                if "gpu core" in name and "%" in node["Value"]:
                    gpu_load = float(node["Value"].replace("%", ""))
                if "gpu core" in name and "Â°c" in node["Value"].lower():
                    gpu_temp = float(node["Value"].replace("Â°C", ""))

            if "Children" in node:
                for child in node["Children"]:
                    parse(child)

        for hw in data["Children"]:
            parse(hw)

        return cpu_load, cpu_temp, gpu_load, gpu_temp
    except Exception as e:
        print("Erreur lecture OHM:", e)
        return None, None, None, None
```

---

# ğŸ”¹ MÃ©thode 3 : LibreHardwareMonitor (alternative plus moderne)

* **LibreHardwareMonitor** est un fork plus maintenu dâ€™OpenHardwareMonitor.
* Tu peux lâ€™utiliser pareil (il expose aussi une API web locale).

---

# ğŸ”¹ IntÃ©gration dans ton projet

Dans `cpu_monitor.py` et `gpu_monitor.py`, tu remplaces les `random.randint` par un appel Ã  ces fonctions.
Exemple :

```python
# cpu_monitor.py
from system.ohm_reader import get_cpu_gpu_from_ohm

def get_cpu_usage():
    cpu_load, cpu_temp, _, _ = get_cpu_gpu_from_ohm()
    return cpu_load or 0, cpu_temp or 0
```

```python
# gpu_monitor.py
from system.ohm_reader import get_cpu_gpu_from_ohm

def get_gpu_usage():
    _, _, gpu_load, gpu_temp = get_cpu_gpu_from_ohm()
    return gpu_load or 0, gpu_temp or 0
```

---

âœ… Avantage OHM/LibreHWMonitor :

* Tu rÃ©cupÃ¨res **tout** (CPU %, RAM, GPU %, TempÃ©ratures, ventilateursâ€¦).
* Tu peux mÃªme afficher la RAM ou le stockage plus tard.

âš ï¸ InconvÃ©nient : il faut que lâ€™utilisateur **lance OpenHardwareMonitor en arriÃ¨re-plan**.

---

ğŸ‘‰ Veux-tu que je tâ€™ajoute un **fichier `ohm_reader.py` prÃªt Ã  lâ€™emploi** que tu mettras dans ton dossier `system/` pour centraliser lâ€™accÃ¨s aux capteurs ?
